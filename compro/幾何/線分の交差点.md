# 線分の交差点



コメントで書いたが、ソースコードに書いたままにしておくには長すぎるので持ってきた

```cpp
/*
 * [点の導出]
 * 線分abと線分cdの交点を点pとし、ap:pb のapを比tとする(0<=t<=1)
 * ここで、次の式が成り立つ
 * p = a + t * (b - a)
 *
 * 交点pは線分cd上にあるので、ベクトルcpとベクトルcdの外積は0になる
 * (p-c)×(d-c)=0
 * 
 * これから、tを求める
 * (p-c)×(d-c)=0
 * (a+t*(b-a) -c)×(d-c)=0
 * (a-c + t*(b-a))×(d-c)=0
 * (a-c)×(d-c) + (t*(b-a))×(d-c)=0
 * (a-c)×(d-c) + t*(b-a)×(d-c)=0
 * t*(b-a)×(d-c)=-(a-c)×(d-c)
 * t=-(a-c)×(d-c)/(b-a)×(d-c)
 *
 * t=-cross(a-c,d-c)/cross(b-a,d-c)
 * 
 * よって、tが求まったので、pの式に代入して求めることができる
 */
```





https://hcpc-hokudai.github.io/archive/geometry_004.pdf に書いてある導出方法



これは、2つの線分が平行である場合は交点は存在しないと判定すればよいが、もし線分が線分を包含してたらめんどくさい

もし、包含してるときに行いたい場合は線分の包含判定で場合分けすればよい

![image-20220419013708970](C:\Users\matum\AppData\Roaming\Typora\typora-user-images\image-20220419013708970.png)

